/**
 * Tab Kit
 * http://jomel.me.uk/software/firefox/tabkit/
 */
 
@namespace url("http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul");

/*************************
 * Emphasize unread tabs *
 *************************/

/* If Sorting and Grouping sets "colortabnotlabel" we do the opposite */
.tabbrowser-tabs[highlightunread]:not([colortabnotlabel]) .tabbrowser-tab:not([read]) > * {
	background-color: yellow !important; /* = #ffff00; by comparison, colorizeTab would make yellow #ffff80 */
}
.tabbrowser-tabs[highlightunread][colortabnotlabel] .tabbrowser-tab:not([read]) .tab-text {
	color: black !important; /* We can't take the risk of them having a white on black theme */
	background-color: #ff6 !important;
}

.tabbrowser-tabs[multirow="true"] .tabbrowser-tab .tab-text {
	-moz-border-radius: 3px 3px 1px 1px;
}
.tabbrowser-tabs[multirow="true"] .tabbrowser-tab[selected="true"] .tab-text {
	-moz-border-radius: 3px 3px 3px 3px;
}

.tabbrowser-tabs[highlightunread] .tabbrowser-tab:not([read]) .tab-text {
	font-style: italic !important;
}
.tabbrowser-tabs[highlightunread] .tabbrowser-tab[read] .tab-text {
	font-style: normal !important; /* just in case themes use italic by default! */
}


.tabbrowser-tabs[emphasizecurrent]:not([colortabnotlabel]) .tabbrowser-tab[selected="true"] > * {
	background-color: black;
}
.tabbrowser-tabs[emphasizecurrent] .tabbrowser-tab[selected="true"] .tab-text {
	color: white;
}
.tabbrowser-tabs[emphasizecurrent][colortabnotlabel] .tabbrowser-tab[selected="true"] .tab-text {
	background-color: black !important;
	color: white !important;
}

/************************************************************
 * Hack to expose overflow scrollbars for Javascript access *
 ************************************************************/

.tabbrowser-tabs scrollbar {
	-moz-binding: url(chrome://tabkit/content/bindings.xml#scrollbar);
}

/******************************
 * Tab bar & sidebar position *
 ******************************/

/*
stack					H #browser-stack
 hbox					H #browser
  vbox					V #sidebar-box
  splitter				H #sidebar-splitter
  vbox					V #appcontent
   tabbrowser			H #content							gBrowser
    tabbox				V   > tabbox						gBrowser.mTabBox
     hbox				H .tabbrowser-strip					gBrowser.mStrip
      tabs				H .tabbrowser-tabs					_tabContainer
       stack			H .tabs-stack
        vbox			V   > vbox:last-child
         hbox			H   > vbox:last-child > hbox
          arrowscrollboxH .tabbrowser-arrowscrollbox		_tabstrip
           scrollbox	H   > scrollbox
            box			H .box-inherit scrollbox-innerbox	_tabInnerBox
             tab		H 
     tabpanels          H
*/

/* Inspired by Kurt Schultz (supernova_00): http://www.supernova00.biz/userchrome.html */

/* Note:
 * All the -moz-box-* properties set below are mainly for reference
 * The real work goes on in the JS that sets their corresponding attributes
 */

/* This is set by JS. If you set both they cancel out! */
/*#browser[vertisidebar="reverse"],
#browser[horizsidebar="reverse"],
#browser[horizsidebar] > #sidebar-box > sidebarheader {
	-moz-box-direction: reverse !important;
}*/

#browser[horizsidebar],
#browser[horizsidebar] > #sidebar-splitter,
#browser[horizsidebar] > #sidebar-box > sidebarheader {
	-moz-box-orient: vertical !important;
}
#browser[horizsidebar] > #sidebar-box,
#browser[horizsidebar] > #appcontent {
	-moz-box-orient: horizontal !important;
}

#browser[horizsidebar] > #sidebar-box > sidebarheader {
	-moz-box-pack: end !important;
	border-left: 1px solid ThreeDHighlight !important;
	margin-left: 1px !important;
}
#browser[horizsidebar] > #sidebar-box .tabs-closebutton > .toolbarbutton-icon {
	padding: 4px 2px !important;
}
#browser[horizsidebar] #sidebar-title {
	display: none !important;
}
#browser[horizsidebar] #sidebar-throbber {
	margin-left: 4px !important;
}
#browser[horizsidebar] #sidebar {
	width: inherit !important;
	max-width: inherit !important;
	height: 200px !important;
	min-height: 150px !important;
}

/* Inspired by Stephen Clavering (clav): http://forums.mozillazine.org/viewtopic.php?p=238798#238798 */

/* Note:
 * All the -moz-box-* properties set below are mainly for reference
 * The real work goes on in the JS that sets their corresponding attributes
 * (except .tabbrowser-tab { -moz-box-align })
 */

/* This is set by JS. If you set both they cancel out! */
/*#content[horiztabbar="reverse"] > tabbox,
#content[vertitabbar="reverse"] > tabbox {
	-moz-box-direction: reverse !important;
}*/

#content[vertitabbar] > tabbox,
#content[vertitabbar] .tabs-stack > vbox:last-child {
	-moz-box-orient: horizontal !important;
	max-height: none !important;
}
#content[vertitabbar],
#content[vertitabbar] > tabbox > .tabbrowser-strip,
#content[vertitabbar] .tabbrowser-tabs,
#content[vertitabbar] .tabs-stack,
#content[vertitabbar] .tabs-stack > vbox:last-child > hbox,
#content[vertitabbar] .tabbrowser-arrowscrollbox,
#content[vertitabbar] .tabbrowser-arrowscrollbox > scrollbox,
#content[vertitabbar] .tabbrowser-arrowscrollbox > scrollbox > .scrollbox-innerbox,
#content[vertitabbar] > tabbox > tabpanels {
	-moz-box-orient: vertical !important;
	max-height: none !important;	
}

/*!!#content[vertitabbar] .tabbrowser-tabs {
	-moz-box-align: start !important;
}*/
#content[vertitabbar] .tabbrowser-arrowscrollbox .scrollbox-innerbox {
	/*!! -moz-box-align: stretch !important; */
	overflow-x: hidden !important;
	overflow-y: auto !important;
}
/* Hide scrollbuttons since we're putting in a scrollbar */
#content[vertitabbar] .tabbrowser-arrowscrollbox .scrollbutton-up,
#content[vertitabbar] .tabbrowser-arrowscrollbox .scrollbutton-down-stack {
	display: none !important;
}
#content[vertitabbar] .tabbrowser-tab {
	-moz-box-sizing: padding-box !important;
	min-height: 24px !important;
	max-height: 24px !important;
	/*-moz-box-orient: horizontal !important;*/ /* not done by JS */
	/*-moz-box-align: start !important;*/ /* not done by JS */
}

/* The All Tabs button is redundant since the vertical tab bar is a permanent
 * equivalent to the All Tabs popup.
 * There's nowhere pretty for a single close button to go - close buttons ought
 * to go on tabs or nowhere (and anyone who's changed browser.tabs.closeButtons
 * will know about Ctrl-W or Ctrl/middle-clicking anyway...)
 */
#content[vertitabbar] .tabs-alltabs-stack,
#content[vertitabbar] .tabs-closebutton-box {
	display: none; /* Not !important though, allow user to override */
}

/* Hide bottom border */
#content[vertitabbar] .tabs-stack > vbox:first-child {
	display: none !important;
}

#content[vertitabbar] .tabbrowser-tabs {
	/* Background was designed for repeat-y, and looks ugly when tiled vertically */
	background-image: none !important;
	/* Pretending that the tab bar is a tabpanel is quite pretty under Windows,
	 * and while somewhat illogical should never look awful.
	 * Not !important though, allow user to override!
	-moz-appearance: tabpanels;*/
}
/* Cosmetic: hide tab side images */
#content[vertitabbar] .tabbrowser-tab .tab-image-left,
#content[vertitabbar] .tabbrowser-tab .tab-image-right {
	display: none !important;
}

/* Hide splitter when tab bar is hidden */
.tabbrowser-strip[collapsed="true"] + #tabkit-splitter {
	visibility: collapse;
}

/************************
 * Sorting and Grouping *
 ************************/

.tabbrowser-tab[groupcollapsed] {
	text-decoration: underline;
}

/* Override colors inherited from tabs */
.tabs-alltabs-button > menupopup > menuitem:hover,
.tabs-alltabs-button > menupopup > menuitem:hover > label {
	color: HighlightText !important;
	background-color: Highlight !important;
}

/*!!.tabs-alltabs-popup > menuitem label {
	color: black;
	background-color: yellow !important;
}*/

/*!!.tabbrowser-tabs[makinggroup="true"] .tabbrowser-tab, .tabbrowser-tabs[makinggroup="true"] .tab-text {
	cursor: alias;
}*/

#menu_tabkit-sortgroup label.menu-accel {
	font-size: 80%;
}

/******************************************
 * Close Tabs Before and Close Tabs After *
 ******************************************/

.menu_tabkit-closeBeforeAfter-horizontal, .menu_tabkit-closeBeforeAfter-vertical {
	display: none !important;
}
#content[closebeforeafternotother] .tabbrowser-strip menuitem[oncommand*="removeAllTabsBut"] {
	display: none !important;
}
#content[closebeforeafternotother] .menu_tabkit-closeBeforeAfter-horizontal {
	display: -moz-box !important;
}
#content[closebeforeafternotother][vertitabbar] .menu_tabkit-closeBeforeAfter-horizontal {
	display: none !important;
}
#content[closebeforeafternotother][vertitabbar] .menu_tabkit-closeBeforeAfter-vertical {
	display: -moz-box !important;
}

/******************
 * Multi-row tabs *
 ******************/

#tabkit-tab-drop-indicator-bar {
	display: none;
	height: 0 !important; /* Prevent moving mouse over indicator bar causing drop arrow to flash and drops to fail */
}
#tabkit-tab-drop-indicator-bar[dragging="true"] {
    display: -moz-box;
}
#tabkit-tab-drop-indicator-bar > hbox {
	margin-bottom: -14px !important; /* Prevent moving mouse over indicator bar causing drop arrow to flash and drops to fail */
}

.tabbrowser-tabs[multirow="true"] {
	max-height: none !important;
}

.tabbrowser-tabs[multirow] .tabbrowser-arrowscrollbox .scrollbutton-up,
.tabbrowser-tabs[multirow] .tabbrowser-arrowscrollbox .scrollbutton-down-stack {
	display: none !important;
}

.tabbrowser-tabs[multirow="true"] .tabbrowser-arrowscrollbox .scrollbox-innerbox {
	display: block !important; /* or table ? */
}

.tabbrowser-tabs[multirow="true"][multirowscroll] .tabbrowser-arrowscrollbox .scrollbox-innerbox {
	overflow-y: auto !important;
	/* note that min/max-height will be set to 24*rows too */
}

.tabbrowser-tabs[multirow] .tabbrowser-tab {
	min-height: 24px !important;
	max-height: 24px !important;
	/*!!max-height: none !important;
	min-height: 0 !important;*/
	/*!!min-width: 0 !important;*/
	/*!!vertical-align: bottom;*/
}

/* Center All Tabs button */
.tabbrowser-tabs .tabs-stack > vbox:last-child > hbox {
	-moz-box-align: center !important;
}
.tabbrowser-tabs .tabs-alltabs-stack {
	max-height: 29px !important;
}

/* Hide bottom border as it doesn't work graphically with multiple rows of tabs TODO-P6: find a way to replace it? */
/*.tabbrowser-tabs[multirow="true"] .tabs-stack > vbox:first-child {*/
.tabbrowser-tabs[multirow="true"] .tabs-bottom {
	display: none !important;
}

/*************************
 * Scrollbars not arrows *
 *************************/

#main-window[scrollbarsnotarrows] arrowscrollbox[orient="vertical"] > scrollbox > .scrollbox-innerbox {
	overflow-y: auto !important;
}
#main-window[scrollbarsnotarrows] arrowscrollbox[orient="vertical"] > .autorepeatbutton-up,
#main-window[scrollbarsnotarrows] arrowscrollbox[orient="vertical"] > .autorepeatbutton-down {
	display: none !important;
}